---
import Container from "@components/container.astro";
import Link from "@components/ui/link.astro";
import Dropdown from "./dropdown.astro";

const menuitems = [
  {
    title: "クリスタルボウル",
    path: "#",
    children: [
      { title: "セッション", path: "#" },
      { title: "予約", path: "#" },
      { title: "体験談", path: "#" },
    ],
  },
  {
    title: "サービス",
    path: "/pricing",
  },
  {
    title: "会社概要",
    path: "/about",
  },
  {
    title: "ブログ",
    path: "/blog",
  },
];
---

<Container>
  <header
    class="flex flex-col lg:flex-row lg:border-b-[1px] lg:pb-4 justify-between items-center my-5"
    x-data="{ open: false }"
    x-init="$watch('open', value => console.log(value))">
    <div class="flex w-full lg:w-auto items-center justify-between">
      <a href="/" class="text-xl flex items-center"
        >
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="37" fill="none"><path fill="#000" d="M24 18.442c2.02 0 3.688-1.667 3.688-3.688S26.021 11.065 24 11.065s-3.689 1.668-3.689 3.689c0 2.02 1.668 3.688 3.689 3.688ZM35.116 26.476l-3.487-1.82a3.088 3.088 0 0 1-1.061-.908l-2.02-2.88a3.52 3.52 0 0 0-2.83-1.466h-3.386a3.615 3.615 0 0 0-2.88 1.465l-2.071 2.88c-.253.405-.657.708-1.062.91l-3.435 1.819c-.758.404-1.162 1.313-.859 2.122.354.91 1.465 1.314 2.325.859l3.536-1.82a5.86 5.86 0 0 0 2.224-1.92l.05-.1v3.991l-5.457 2.83c-.91.454-1.364 1.515-1.01 2.475.303.86 1.061 1.415 1.97 1.415.101 0 .253 0 .354-.05l7.428-1.314a4.48 4.48 0 0 1 1.162 0l7.427 1.314c.101 0 .253.05.354.05a2.11 2.11 0 0 0 1.97-1.415c.354-.96-.1-2.02-1.01-2.476l-5.457-2.829v-3.991l.05.1c.556.81 1.365 1.466 2.224 1.92l3.536 1.82c.253.151.506.202.758.202.657 0 1.314-.404 1.566-1.061.253-.859-.151-1.768-.91-2.122ZM16.37 8.792c.202.454.657.757 1.162.757.152 0 .304-.05.455-.1.606-.253.91-.96.657-1.618l-1.516-3.688c-.253-.606-.96-.91-1.617-.657-.606.253-.91.96-.657 1.617l1.516 3.689ZM12.884 12.884a1.163 1.163 0 0 0 0-1.718L8.792 7.023c-.506-.505-1.264-.505-1.718 0a1.163 1.163 0 0 0 0 1.718l4.092 4.092c.253.253.556.354.86.354.302 0 .605-.1.858-.303ZM8.791 16.37l-3.688-1.515c-.606-.253-1.364.05-1.617.657-.202.606.05 1.314.707 1.617l3.689 1.515c.151.05.303.102.454.102.506 0 .96-.303 1.162-.758.253-.657-.05-1.365-.707-1.617ZM8.286 24a1.23 1.23 0 0 0-1.212-1.213H1.213A1.23 1.23 0 0 0 0 24a1.23 1.23 0 0 0 1.213 1.213h5.81c.707 0 1.263-.556 1.263-1.213ZM7.882 29.305l-3.688 1.516c-.607.253-.91.96-.657 1.617.202.455.657.758 1.162.758.151 0 .303-.05.454-.101l3.689-1.516c.606-.253.909-.96.657-1.617-.303-.606-1.01-.91-1.617-.657ZM43.806 30.872l-3.688-1.516c-.606-.253-1.364.05-1.617.657-.253.606.05 1.364.657 1.617l3.688 1.516c.152.05.303.1.455.1.505 0 .96-.302 1.162-.757.253-.657 0-1.365-.657-1.617ZM46.787 22.737h-5.81a1.23 1.23 0 0 0-1.213 1.213 1.23 1.23 0 0 0 1.213 1.212h5.81A1.23 1.23 0 0 0 48 23.95a1.23 1.23 0 0 0-1.213-1.213ZM38.5 17.937c.203.454.658.758 1.163.758.152 0 .303-.05.455-.102l3.688-1.515c.606-.253.91-.96.657-1.617-.253-.607-.96-.91-1.617-.657l-3.688 1.515c-.606.304-.91 1.011-.657 1.618ZM40.977 7.023c-.506-.505-1.263-.505-1.718 0l-4.143 4.093c-.506.505-.506 1.263 0 1.717.252.253.555.354.858.354.304 0 .607-.1.86-.354l4.092-4.092a1.206 1.206 0 0 0 .05-1.718ZM30.013 9.448c.151.05.303.102.454.102.506 0 .96-.304 1.162-.758l1.516-3.688c.253-.607-.05-1.365-.657-1.618-.606-.252-1.364.05-1.617.657l-1.516 3.689c-.252.656.051 1.364.658 1.616ZM24 8.236a1.23 1.23 0 0 0 1.213-1.213v-5.81A1.23 1.23 0 0 0 24 0a1.23 1.23 0 0 0-1.213 1.213v5.81c0 .708.556 1.213 1.213 1.213Z"/></svg>
        <span class="ml-2 font-bold text-slate-800">Leia</span><span
          class="text-slate-500">Crystal</span
        >
      </a>
      <div class="block lg:hidden">
        <button @click="open = !open" class="text-gray-800">
          <svg
            fill="currentColor"
            class="w-4 h-4"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg">
            <title>メニュー</title>
            <path
              x-cloak
              x-show="open"
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M18.278 16.864a1 1 0 01-1.414 1.414l-4.829-4.828-4.828 4.828a1 1 0 01-1.414-1.414l4.828-4.829-4.828-4.828a1 1 0 011.414-1.414l4.829 4.828 4.828-4.828a1 1 0 111.414 1.414l-4.828 4.829 4.828 4.828z"
            ></path>
            <path
              x-show="!open"
              fill-rule="evenodd"
              d="M4 5h16a1 1 0 010 2H4a1 1 0 110-2zm0 6h16a1 1 0 010 2H4a1 1 0 010-2zm0 6h16a1 1 0 010 2H4a1 1 0 010-2z"
            ></path>
          </svg>
        </button>
      </div>
    </div>
    <nav
      class="hidden w-full lg:w-auto mt-2 lg:flex lg:mt-0"
      :class="{ 'block': open, 'hidden': !open }"
      x-transition>
      <ul class="flex flex-col lg:flex-row lg:gap-3">
        {
          menuitems.map((item, index) => (
            <>
              {item.children && (
                <Dropdown
                  title={item.title}
                  children={item.children}
                  lastItem={index === menuitems.length - 1}
                />
              )}

              {!item.children && (
                <li>
                  <a
                    href={item.path}
                    class="flex lg:px-3 py-2 text-gray-600 hover:text-[#f7caff]">
                    {item.title}
                  </a>
                </li>
              )}
            </>
          ))
        }
      </ul>
      <div class="lg:hidden flex items-center mt-3 gap-4">
        <Link href="mailto:" size="md">お問い合わせ</Link>
      </div>
    </nav>
    <div>
      <div class="hidden lg:flex items-center gap-4">
        <Link href="mailto:" size="md">お問い合わせ</Link>
      </div>
    </div>
  </header>
</Container>
